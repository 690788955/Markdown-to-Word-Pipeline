# 系统架构

## 整体架构

```
                    ┌─────────────┐
                    │   CDN/WAF   │
                    └──────┬──────┘
                           │
                    ┌──────▼──────┐
                    │   负载均衡   │
                    │  (Nginx/SLB) │
                    └──────┬──────┘
                           │
         ┌─────────────────┼─────────────────┐
         │                 │                 │
    ┌────▼────┐      ┌────▼────┐      ┌────▼────┐
    │ Web-01  │      │ Web-02  │      │ Web-03  │
    └────┬────┘      └────┬────┘      └────┬────┘
         │                 │                 │
         └─────────────────┼─────────────────┘
                           │
                    ┌──────▼──────┐
                    │  Redis集群   │
                    └──────┬──────┘
                           │
                    ┌──────▼──────┐
                    │  MySQL主从   │
                    └─────────────┘
```

## 服务器清单

| 主机名 | IP | 角色 | 配置 |
|-------|-----|------|------|
| web-01 | 10.0.1.11 | Web服务器 | 8C16G |
| web-02 | 10.0.1.12 | Web服务器 | 8C16G |
| web-03 | 10.0.1.13 | Web服务器 | 8C16G |
| redis-01 | 10.0.2.11 | Redis主节点 | 4C8G |
| redis-02 | 10.0.2.12 | Redis从节点 | 4C8G |
| mysql-master | 10.0.3.11 | MySQL主库 | 16C64G |
| mysql-slave | 10.0.3.12 | MySQL从库 | 16C64G |

## 网络拓扑

| 网段 | 用途 | VLAN |
|------|------|------|
| 10.0.1.0/24 | Web服务层 | 100 |
| 10.0.2.0/24 | 缓存层 | 200 |
| 10.0.3.0/24 | 数据库层 | 300 |
| 10.0.10.0/24 | 管理网络 | 1000 |

## 关键端口

| 服务 | 端口 | 协议 |
|------|------|------|
| Nginx | 80, 443 | TCP |
| SSH | 22 | TCP |
| MySQL | 3306 | TCP |
| Redis | 6379 | TCP |
| Prometheus | 9090 | TCP |
| Grafana | 3000 | TCP |
