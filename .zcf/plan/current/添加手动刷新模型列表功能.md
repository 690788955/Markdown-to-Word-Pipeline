# 添加手动刷新模型列表功能

**创建时间**: 2026-02-12 13:58:00
**状态**: 执行中 - 改进方案

## 任务上下文

用户希望在聊天配置界面的模型选择框旁边添加一个刷新按钮,允许手动触发获取最新的 OpenAI 模型列表。

**问题发现**:
- 当前实现仍使用硬编码的模型列表作为回退
- 用户希望完全移除硬编码,改为可自定义输入

**改进方案**:
- 将 `<select>` 改为 `<input>` + `<datalist>` 组合
- 用户可以手动输入任何模型名称
- 刷新按钮获取的模型列表作为建议选项
- 移除硬编码的回退逻辑

## 执行计划

### 步骤 1: 修改 HTML 结构 ✅
**文件**: `web/static/editor/chat-config.js`
**位置**: `createDialog()` 方法中的模型选择部分
**操作**: 在模型 `<select>` 外包裹 flex 容器,添加刷新按钮
**预期结果**: 模型选择框和刷新按钮并排显示

### 步骤 2: 添加事件监听器 ✅
**文件**: `web/static/editor/chat-config.js`
**位置**: `attachEventListeners()` 方法
**操作**: 添加刷新按钮的点击事件监听
**预期结果**: 点击按钮时触发刷新方法

### 步骤 3: 实现刷新方法 ✅
**文件**: `web/static/editor/chat-config.js`
**位置**: 类方法区域
**操作**: 添加 `refreshModels()` 方法
**预期结果**: 用户点击后重新获取模型列表

### 步骤 4: 添加按钮样式 ✅
**文件**: `web/static/editor/chat.css`
**位置**: 配置对话框样式区域
**操作**: 添加图标按钮样式
**预期结果**: 按钮有旋转动画效果

### 步骤 5: 改为自定义输入 ⏳
**文件**: `web/static/editor/chat-config.js`
**操作**:
1. 将 `<select>` 改为 `<input>` + `<datalist>`
2. 修改 `loadModels()` 填充 datalist
3. 移除 `setDefaultModels()` 方法
**预期结果**: 用户可以手动输入或从建议列表选择

## 文件修改清单

| 文件 | 修改类型 | 说明 |
|------|---------|------|
| `web/static/editor/chat-config.js` | 修改 | 改为自定义输入 |
| `web/static/editor/chat.css` | 修改 | 添加按钮样式 |

## 风险评估

- **风险等级**: 低
- **影响范围**: 仅聊天配置界面
- **回滚方案**: 移除新增代码即可
