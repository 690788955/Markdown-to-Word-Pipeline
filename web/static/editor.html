<!DOCTYPE html>
<html lang="zh-CN">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Áü•ËØÜÂ∫ìÁºñËæëÂô® - ËøêÁª¥ÊñáÊ°£ÁîüÊàêÁ≥ªÁªü</title>
    <!-- È¢ÑÂä†ËΩΩÂÖ≥ÈîÆËµÑÊ∫ê -->
    <link rel="preload" href="/static/style.css?v=12" as="style">
    <link rel="preload" href="/static/editor.css?v=4" as="style">
    <link rel="preload" href="/static/editor/bundle.js?v=1" as="script">
    <!-- È¢ÑËøûÊé• CDNÔºàÂ¶ÇÊûú‰ΩøÁî®Ôºâ -->
    <link rel="preconnect" href="https://cdn.jsdelivr.net">
    <link rel="dns-prefetch" href="https://cdn.jsdelivr.net">
    <!-- Ê†∑ÂºèË°® -->
    <link rel="stylesheet" href="/static/style.css?v=12">
    <link rel="stylesheet" href="/static/editor.css?v=4">
    <!-- Viewer.js ÂõæÁâáÊü•ÁúãÂô® -->
    <link rel="stylesheet" href="/static/vendor/viewerjs/dist/viewer.min.css">
    <script src="/static/vendor/viewerjs/dist/viewer.min.js"></script>
    <!-- AI ËÅäÂ§©Èù¢ÊùøÊ†∑Âºè -->
    <link rel="stylesheet" href="/static/editor/chat.css?v=2">
    <!-- Vditor Âíå highlight.js Â∞ÜÊåâÈúÄÊáíÂä†ËΩΩ -->
</head>

<body class="editor-page">
    <div class="editor-container">
        <!-- È°∂ÈÉ®ÂØºËà™Ê†è -->
        <header class="editor-header">
            <div class="header-left">
                <a href="/" class="back-btn" title="ËøîÂõû‰∏ªÈ°µ">
                    <span class="back-icon">‚Üê</span>
                    <span class="back-text">ËøîÂõû</span>
                </a>
                <h1 class="editor-title">Áü•ËØÜÂ∫ìÁºñËæëÂô®</h1>
            </div>
            
            <div class="header-right">
                <!-- VSCode È£éÊ†ºÁöÑÊ¥ªÂä®Ê†èÊåâÈíÆ -->
                <div class="activity-bar">
                    <button id="toggleFileTree" class="activity-btn is-active" title="ËµÑÊ∫êÁÆ°ÁêÜÂô® (Ctrl+Shift+E)">
                        <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1.5">
                            <path d="M3 7V17C3 18.1046 3.89543 19 5 19H19C20.1046 19 21 18.1046 21 17V9C21 7.89543 20.1046 7 19 7H13L11 5H5C3.89543 5 3 5.89543 3 7Z"/>
                        </svg>
                    </button>
                    <button id="toggleGitPanel" class="activity-btn" title="Ê∫ê‰ª£Á†ÅÁÆ°ÁêÜ (Ctrl+Shift+G)">
                        <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1.5">
                            <circle cx="6" cy="6" r="2"/>
                            <circle cx="18" cy="18" r="2"/>
                            <circle cx="6" cy="18" r="2"/>
                            <path d="M6 8V16"/>
                            <path d="M6 8C6 8 6 12 12 12C18 12 18 16 18 16"/>
                        </svg>
                        <span id="gitBadge" class="activity-badge" style="display:none;">0</span>
                    </button>
                    <button id="toggleChatPanel" class="activity-btn" title="AI Âä©Êâã (Ctrl+Shift+A)">
                        <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1.5">
                            <path d="M21 15a2 2 0 0 1-2 2H7l-4 4V5a2 2 0 0 1 2-2h14a2 2 0 0 1 2 2z"/>
                            <circle cx="9" cy="10" r="1"/>
                            <circle cx="15" cy="10" r="1"/>
                            <path d="M9 14c.5.5 1.5 1 3 1s2.5-.5 3-1"/>
                        </svg>
                    </button>
                </div>
                <div class="header-group header-group-theme">
                    <button id="themeToggleBtn" class="header-btn header-btn-theme" title="‰∏ªÈ¢òËÆæÁΩÆ">
                        <span class="theme-dot"></span>
                        <span class="theme-text">‰∏ªÈ¢ò</span>
                    </button>
                    <div id="themePanel" class="theme-panel">
                        <div class="theme-panel-title">‰∏ªÈ¢òËÆæÁΩÆ</div>
                        
                        <!-- ‰∏ªÈ¢òÈ¢ÑËÆæ -->
                        <div class="theme-row">
                            <span class="theme-label">‰∏ªÈ¢òÈ¢ÑËÆæ</span>
                        </div>
                        <div class="theme-row theme-presets" id="themePresets">
                            <!-- È¢ÑËÆæÊåâÈíÆÂ∞ÜÁî± JS Âä®ÊÄÅÁîüÊàê -->
                        </div>
                        
                        <div class="theme-divider"></div>
                        
                        <!-- Âü∫Á°Ä‰∏ªÈ¢ò -->
                        <div class="theme-row">
                            <button class="theme-chip" data-theme-option="light">ÊµÖËâ≤</button>
                            <button class="theme-chip" data-theme-option="dark">Ê∑±Ëâ≤</button>
                        </div>
                        <div class="theme-row">
                            <label class="theme-label" for="themeAccentInput">Âº∫Ë∞ÉËâ≤</label>
                            <input id="themeAccentInput" type="color" value="#1a8fbf">
                        </div>
                        <div class="theme-row theme-swatches">
                            <button class="theme-swatch" data-accent="#1a8fbf" style="--swatch: #1a8fbf;"></button>
                            <button class="theme-swatch" data-accent="#1f7ae0" style="--swatch: #1f7ae0;"></button>
                            <button class="theme-swatch" data-accent="#14b8a6" style="--swatch: #14b8a6;"></button>
                            <button class="theme-swatch" data-accent="#2f855a" style="--swatch: #2f855a;"></button>
                            <button class="theme-swatch" data-accent="#0ea5e9" style="--swatch: #0ea5e9;"></button>
                        </div>
                        
                        <div class="theme-divider"></div>
                        
                        <!-- ÂÜÖÂÆπËÆæÁΩÆ -->
                        <div class="theme-row">
                            <span class="theme-label">ÂÜÖÂÆπÂØÜÂ∫¶</span>
                            <button class="theme-chip" data-content-style="comfortable">ËàíÈÄÇ</button>
                            <button class="theme-chip" data-content-style="compact">Á¥ßÂáë</button>
                        </div>
                        <div class="theme-row">
                            <span class="theme-label">ÂÜÖÂÆπÂÆΩÂ∫¶</span>
                            <button class="theme-chip" data-content-width="narrow">Á™Ñ</button>
                            <button class="theme-chip" data-content-width="medium">‰∏≠</button>
                            <button class="theme-chip" data-content-width="wide">ÂÆΩ</button>
                            <button class="theme-chip" data-content-width="full">ÂÖ®ÂÆΩ</button>
                        </div>
                        
                        <div class="theme-divider"></div>
                        
                        <!-- Â≠ó‰ΩìËÆæÁΩÆ -->
                        <div class="theme-row">
                            <span class="theme-label">Â≠ó‰Ωì</span>
                            <select id="fontFamilySelect" class="theme-select">
                                <option value="system-ui, -apple-system, sans-serif">Á≥ªÁªüÈªòËÆ§</option>
                                <option value="Georgia, serif">Ë°¨Á∫øÂ≠ó‰Ωì</option>
                                <option value="Consolas, monospace">Á≠âÂÆΩÂ≠ó‰Ωì</option>
                            </select>
                        </div>
                        <div class="theme-row">
                            <span class="theme-label">Â≠óÂè∑</span>
                            <input type="range" id="fontSizeSlider" min="12" max="24" value="16" class="theme-slider">
                            <span id="fontSizeValue" class="theme-value">16px</span>
                        </div>
                        
                        <div class="theme-divider"></div>
                        
                        <!-- ‰ª£Á†ÅÈÖçËâ≤ -->
                        <div class="theme-row">
                            <span class="theme-label">‰ª£Á†ÅÈÖçËâ≤</span>
                        </div>
                        <div class="theme-row theme-code-themes">
                            <button class="theme-code-chip" data-code-theme="github" title="ÁªèÂÖ∏ GitHub È£éÊ†º">
                                <span class="theme-code-preview">
                                    <span style="background:#24292e"></span>
                                    <span style="background:#d73a49"></span>
                                    <span style="background:#6f42c1"></span>
                                    <span style="background:#22863a"></span>
                                </span>
                                <span class="theme-code-name">GitHub</span>
                            </button>
                            <button class="theme-code-chip" data-code-theme="atom-one" title="Atom One Dark ÈÖçËâ≤">
                                <span class="theme-code-preview">
                                    <span style="background:#282c34"></span>
                                    <span style="background:#e06c75"></span>
                                    <span style="background:#c678dd"></span>
                                    <span style="background:#98c379"></span>
                                </span>
                                <span class="theme-code-name">One Dark</span>
                            </button>
                            <button class="theme-code-chip" data-code-theme="vs" title="Visual Studio Code È£éÊ†º">
                                <span class="theme-code-preview">
                                    <span style="background:#1e1e1e"></span>
                                    <span style="background:#569cd6"></span>
                                    <span style="background:#ce9178"></span>
                                    <span style="background:#4ec9b0"></span>
                                </span>
                                <span class="theme-code-name">VS Code</span>
                            </button>
                            <button class="theme-code-chip" data-code-theme="monokai" title="ÁªèÂÖ∏ Monokai ÈÖçËâ≤">
                                <span class="theme-code-preview">
                                    <span style="background:#272822"></span>
                                    <span style="background:#f92672"></span>
                                    <span style="background:#ae81ff"></span>
                                    <span style="background:#a6e22e"></span>
                                </span>
                                <span class="theme-code-name">Monokai</span>
                            </button>
                        </div>
                        
                        <div class="theme-divider"></div>
                        
                        <!-- ÈªòËÆ§ÁºñËæëÊ®°Âºè -->
                        <div class="theme-row">
                            <span class="theme-label">ÁºñËæëÊ®°Âºè</span>
                            <select id="defaultEditorMode" class="theme-select">
                                <option value="ir">IR Ê®°Âºè</option>
                                <option value="wysiwyg">ÊâÄËßÅÂç≥ÊâÄÂæó</option>
                                <option value="sv">ÂàÜÂ±èÈ¢ÑËßà</option>
                            </select>
                        </div>
                        
                        <div class="theme-divider"></div>
                        
                        <!-- ÂØºÂÖ•ÂØºÂá∫ -->
                        <div class="theme-row theme-actions">
                            <button id="exportThemeBtn" class="theme-action-btn" title="ÂØºÂá∫ÂΩìÂâç‰∏ªÈ¢òÈÖçÁΩÆ">ÂØºÂá∫</button>
                            <button id="importThemeBtn" class="theme-action-btn" title="ÂØºÂÖ•‰∏ªÈ¢òÈÖçÁΩÆ">ÂØºÂÖ•</button>
                        </div>
                    </div>
                </div>
            </div>
        </header>

        <!-- ‰∏ªÂÜÖÂÆπÂå∫Âüü -->
        <main class="editor-main">
            <!-- Â∑¶‰æßÔºöÊñá‰ª∂Ê†ëÈù¢Êùø -->
            <aside id="fileTreePanel" class="file-tree-panel">
                <div class="panel-header">
                    <span class="panel-title">
                        <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" style="vertical-align: middle; margin-right: 4px;">
                            <path d="M3 7V17C3 18.1 3.9 19 5 19H19C20.1 19 21 18.1 21 17V9C21 7.9 20.1 7 19 7H13L11 5H5C3.9 5 3 5.9 3 7Z"/>
                        </svg>
                        ÊñáÊ°£
                    </span>
                    <div class="panel-actions">
                        <button id="newFileBtn" class="panel-btn" title="Êñ∞Âª∫Êñá‰ª∂">+</button>
                        <button id="refreshTreeBtn" class="panel-btn" title="Âà∑Êñ∞">
                            <svg width="14" height="14" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                                <polyline points="23 4 23 10 17 10"/>
                                <path d="M20.49 15a9 9 0 1 1-2.12-9.36L23 10"/>
                            </svg>
                        </button>
                    </div>
                </div>
                <div class="search-box">
                    <input type="text" id="fileSearch" placeholder="ÊêúÁ¥¢Êñá‰ª∂..." />
                </div>
                <div id="fileTree" class="file-tree">
                    <div class="tree-loading">Âä†ËΩΩ‰∏≠...</div>
                </div>
            </aside>

            <!-- Â∑¶‰æßÊãñÊãΩÂàÜÈöîÊù° -->
            <div id="leftResizer" class="resizer resizer-left"></div>

            <!-- ‰∏≠Èó¥ÔºöÁºñËæëÂå∫Âüü -->
            <section class="editor-section">
                <!-- Èù¢ÂåÖÂ±ëÂØºËà™ -->
                <div id="breadcrumbNav" class="breadcrumb-nav" style="display: none;"></div>
                <!-- Ê†áÁ≠æÊ†è -->
                <div id="tabBar" class="tab-bar">
                    <div id="tabList" class="tab-list">
                        <div class="tab-empty">ÊâìÂºÄÊñá‰ª∂ÂºÄÂßãÁºñËæë</div>
                    </div>
                </div>
                <!-- ÁºñËæëÂô®ÂÆπÂô® -->
                <div id="editorContainer" class="editor-content">
                    <div class="editor-placeholder">
                        <svg class="placeholder-icon" width="64" height="64" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1.5" style="opacity: 0.5;">
                            <path d="M11 4H4a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2v-7"/>
                            <path d="M18.5 2.5a2.121 2.121 0 0 1 3 3L12 15l-4 1 1-4 9.5-9.5z"/>
                        </svg>
                        <div class="placeholder-text">‰ªéÂ∑¶‰æßÈÄâÊã©Êñá‰ª∂ÂºÄÂßãÁºñËæë</div>
                    </div>
                </div>
                <!-- ÈôÑ‰ª∂Èù¢Êùø -->
                <div id="attachmentPanel" class="attachment-panel" style="display: none;">
                    <div class="attachment-header">
                        <button id="attachmentToggle" class="attachment-toggle" title="Â±ïÂºÄ/ÊäòÂè†ÈôÑ‰ª∂">
                            <span class="attachment-toggle-icon">‚ñº</span>
                            <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" style="vertical-align: middle; margin-right: 4px;">
                                <path d="M21.44 11.05l-9.19 9.19a6 6 0 0 1-8.49-8.49l9.19-9.19a4 4 0 0 1 5.66 5.66l-9.2 9.19a2 2 0 0 1-2.83-2.83l8.49-8.48"/>
                            </svg>
                            <span class="attachment-title">ÈôÑ‰ª∂</span>
                            <span id="attachmentCount" class="attachment-count">0</span>
                        </button>
                        <button id="attachmentRefresh" class="panel-btn attachment-refresh" title="Âà∑Êñ∞">
                            <svg width="14" height="14" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                                <polyline points="23 4 23 10 17 10"/>
                                <path d="M20.49 15a9 9 0 1 1-2.12-9.36L23 10"/>
                            </svg>
                        </button>
                    </div>
                    <div id="attachmentContent" class="attachment-content">
                        <div class="attachment-scroll-indicator attachment-scroll-left" style="display: none;">‚Äπ</div>
                        <div id="attachmentStrip" class="attachment-strip">
                            <!-- ÈôÑ‰ª∂Áº©Áï•ÂõæÂç°ÁâáÂ∞ÜÂú®ËøôÈáåÊ∏≤Êüì -->
                        </div>
                        <div class="attachment-scroll-indicator attachment-scroll-right" style="display: none;">‚Ä∫</div>
                        <div id="attachmentEmpty" class="attachment-empty" style="display: none;">
                            <svg class="attachment-empty-icon" width="32" height="32" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1.5" style="opacity: 0.5;">
                                <path d="M3 7V17C3 18.1 3.9 19 5 19H19C20.1 19 21 18.1 21 17V9C21 7.9 20.1 7 19 7H13L11 5H5C3.9 5 3 5.9 3 7Z"/>
                            </svg>
                            <span class="attachment-empty-text">ÊöÇÊó†ÈôÑ‰ª∂</span>
                        </div>
                    </div>
                </div>
            </section>

            <!-- Âè≥‰æßÊãñÊãΩÂàÜÈöîÊù° -->
            <div id="rightResizer" class="resizer resizer-right"></div>

            <!-- Âè≥‰æßÔºöGit Èù¢Êùø -->
            <aside id="gitPanel" class="git-panel">
                <div class="panel-header">
                    <span class="panel-title">
                        <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" style="vertical-align: middle; margin-right: 4px;">
                            <circle cx="6" cy="6" r="2"/>
                            <circle cx="18" cy="18" r="2"/>
                            <circle cx="6" cy="18" r="2"/>
                            <path d="M6 8V16"/>
                            <path d="M6 8C6 8 6 12 12 12C18 12 18 16 18 16"/>
                        </svg>
                        ÁâàÊú¨ÊéßÂà∂
                    </span>
                    <button id="gitRefreshBtn" class="panel-btn" title="Âà∑Êñ∞">
                        <svg width="14" height="14" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                            <polyline points="23 4 23 10 17 10"/>
                            <path d="M20.49 15a9 9 0 1 1-2.12-9.36L23 10"/>
                        </svg>
                    </button>
                </div>
                <div id="gitContent" class="git-content">
                    <div class="git-loading">Âä†ËΩΩ‰∏≠...</div>
                </div>
            </aside>

            <!-- ËÅäÂ§©Èù¢ÊùøÊãñÊãΩÂàÜÈöîÊù° -->
            <div id="chatResizer" class="resizer resizer-right"></div>

            <!-- Âè≥‰æßÔºöAI ËÅäÂ§©Èù¢Êùø -->
            <aside id="chatPanel" class="chat-panel">
                <div class="panel-header">
                    <span class="panel-title">
                        <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" style="vertical-align: middle; margin-right: 4px;">
                            <path d="M21 15a2 2 0 0 1-2 2H7l-4 4V5a2 2 0 0 1 2-2h14a2 2 0 0 1 2 2z"/>
                            <circle cx="9" cy="10" r="1"/>
                            <circle cx="15" cy="10" r="1"/>
                            <path d="M9 14c.5.5 1.5 1 3 1s2.5-.5 3-1"/>
                        </svg>
                        AI Âä©Êâã
                    </span>
                    <div class="panel-actions">
                        <select id="chat-context-selector" class="chat-context-selector">
                            <option value="current_document">ÂΩìÂâçÊñáÊ°£</option>
                            <option value="selection">ÈÄâ‰∏≠ÂÜÖÂÆπ</option>
                            <option value="knowledge_base">Êï¥‰∏™Áü•ËØÜÂ∫ì</option>
                        </select>
                        <button id="chat-new-btn" class="panel-btn" title="Êñ∞ÂØπËØù (Ctrl+Shift+X)">
                            <svg width="14" height="14" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><path d="M12 5v14M5 12h14"/></svg>
                        </button>
                        <button id="chat-maximize-btn" class="chat-maximize-btn" title="ÂÖ®Â±è (Ctrl+Shift+M)">‚õ∂</button>
                        <button id="chat-settings-btn" class="panel-btn" title="ËÆæÁΩÆ">‚öôÔ∏è</button>
                    </div>
                </div>
                <div class="chat-messages" id="chat-messages">
                    <div class="chat-welcome" id="chat-welcome">
                        <div class="chat-welcome-icon">üí¨</div>
                        <div class="chat-welcome-title">AI Âä©Êâã</div>
                        <div class="chat-welcome-desc">Âü∫‰∫éÂΩìÂâçÊñáÊ°£‰∏ä‰∏ãÊñáÁöÑÊô∫ËÉΩÈóÆÁ≠îÔºåÊîØÊåÅ @ÊñáÊ°£Âêç ÂºïÁî®Â∑≤ÊâìÂºÄÁöÑÊñáÊ°£</div>
                        <div class="chat-welcome-shortcuts">
                            <span><kbd>Ctrl</kbd>+<kbd>Enter</kbd> ÂèëÈÄÅ</span>
                            <span><kbd>Ctrl</kbd>+<kbd>Shift</kbd>+<kbd>A</kbd> ÂàáÊç¢Èù¢Êùø</span>
                            <span><kbd>Ctrl</kbd>+<kbd>Shift</kbd>+<kbd>M</kbd> ÂÖ®Â±è</span>
                        </div>
                    </div>
                </div>
                <div class="chat-input-area">
                    <div class="chat-input-wrapper">
                        <textarea id="chat-input" class="chat-input" placeholder="ËæìÂÖ•Ê∂àÊÅØ... (Ctrl+Enter ÂèëÈÄÅ, @ ÂºïÁî®ÊñáÊ°£)" rows="1"></textarea>
                        <button id="chat-stop-btn" class="chat-stop-btn" style="display:none;" title="ÂÅúÊ≠¢ÁîüÊàê">
                            <svg width="14" height="14" viewBox="0 0 24 24" fill="currentColor"><rect x="6" y="6" width="12" height="12" rx="2"/></svg>
                        </button>
                    </div>
                    <button id="chat-send-btn" class="chat-send-btn">ÂèëÈÄÅ</button>
                </div>
            </aside>
        </main>

        <!-- ËÅäÂ§©Èù¢ÊùøÂÖ®Â±èÈÅÆÁΩ©Â±Ç -->
        <div id="chatMaximizeOverlay" class="chat-maximize-overlay"></div>
    </div>

    <!-- Âè≥ÈîÆ‰∏ä‰∏ãÊñáËèúÂçï -->
    <div id="contextMenu" class="context-menu" style="display:none;">
        <div class="context-item" data-action="new">
            <svg width="14" height="14" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" style="vertical-align: middle; margin-right: 6px;">
                <path d="M14 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V8z"/>
                <polyline points="14 2 14 8 20 8"/>
                <line x1="12" y1="18" x2="12" y2="12"/>
                <line x1="9" y1="15" x2="15" y2="15"/>
            </svg>
            Êñ∞Âª∫Êñá‰ª∂
        </div>
        <div class="context-item" data-action="newFolder">
            <svg width="14" height="14" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" style="vertical-align: middle; margin-right: 6px;">
                <path d="M22 19a2 2 0 0 1-2 2H4a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h5l2 3h9a2 2 0 0 1 2 2z"/>
                <line x1="12" y1="11" x2="12" y2="17"/>
                <line x1="9" y1="14" x2="15" y2="14"/>
            </svg>
            Êñ∞Âª∫Êñá‰ª∂Â§π
        </div>
        <div class="context-divider"></div>
        <div class="context-item" data-action="rename">
            <svg width="14" height="14" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" style="vertical-align: middle; margin-right: 6px;">
                <path d="M11 4H4a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2v-7"/>
                <path d="M18.5 2.5a2.121 2.121 0 0 1 3 3L12 15l-4 1 1-4 9.5-9.5z"/>
            </svg>
            ÈáçÂëΩÂêç
        </div>
        <div class="context-item" data-action="delete">
            <svg width="14" height="14" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" style="vertical-align: middle; margin-right: 6px;">
                <polyline points="3 6 5 6 21 6"/>
                <path d="M19 6v14a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2V6m3 0V4a2 2 0 0 1 2-2h4a2 2 0 0 1 2 2v2"/>
            </svg>
            Âà†Èô§
        </div>
        <div class="context-divider"></div>
        <div class="context-item" data-action="history">
            <svg width="14" height="14" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" style="vertical-align: middle; margin-right: 6px;">
                <circle cx="12" cy="12" r="10"/>
                <polyline points="12 6 12 12 16 14"/>
            </svg>
            Êü•ÁúãÂéÜÂè≤
        </div>
    </div>

    <!-- ÈôÑ‰ª∂Âè≥ÈîÆËèúÂçï -->
    <div id="attachmentContextMenu" class="context-menu" style="display:none;">
        <div class="context-item" data-action="copyRef">
            <svg width="14" height="14" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" style="vertical-align: middle; margin-right: 6px;">
                <rect x="9" y="9" width="13" height="13" rx="2" ry="2"/>
                <path d="M5 15H4a2 2 0 0 1-2-2V4a2 2 0 0 1 2-2h9a2 2 0 0 1 2 2v1"/>
            </svg>
            Â§çÂà∂ÂºïÁî®
        </div>
        <div class="context-item" data-action="preview">
            <svg width="14" height="14" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" style="vertical-align: middle; margin-right: 6px;">
                <path d="M1 12s4-8 11-8 11 8 11 8-4 8-11 8-11-8-11-8z"/>
                <circle cx="12" cy="12" r="3"/>
            </svg>
            È¢ÑËßà
        </div>
        <div class="context-divider"></div>
        <div class="context-item" data-action="renameAttachment">
            <svg width="14" height="14" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" style="vertical-align: middle; margin-right: 6px;">
                <path d="M11 4H4a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2v-7"/>
                <path d="M18.5 2.5a2.121 2.121 0 0 1 3 3L12 15l-4 1 1-4 9.5-9.5z"/>
            </svg>
            ÈáçÂëΩÂêç
        </div>
        <div class="context-item context-item-danger" data-action="deleteAttachment">
            <svg width="14" height="14" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" style="vertical-align: middle; margin-right: 6px;">
                <polyline points="3 6 5 6 21 6"/>
                <path d="M19 6v14a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2V6m3 0V4a2 2 0 0 1 2-2h4a2 2 0 0 1 2 2v2"/>
            </svg>
            Âà†Èô§
        </div>
    </div>

    <!-- Ê®°ÊÄÅÊ°ÜÔºöÊñ∞Âª∫Êñá‰ª∂ -->
    <div id="newFileModal" class="modal" role="dialog" aria-modal="true" aria-labelledby="newFileModalTitle">
        <div class="modal-content modal-sm">
            <div class="modal-header">
                <h3 id="newFileModalTitle">Êñ∞Âª∫Êñá‰ª∂</h3>
                <button class="modal-close" onclick="hideNewFileModal()" aria-label="ÂÖ≥Èó≠ÂØπËØùÊ°Ü">&times;</button>
            </div>
            <div class="modal-body">
                <div class="form-group">
                    <label for="newFilePath">Êñá‰ª∂Ë∑ØÂæÑ</label>
                    <input type="text" id="newFilePath" placeholder="‰æãÂ¶ÇÔºö01-ËøêÁª¥/Êñ∞ÊñáÊ°£.md">
                    <small class="form-hint">Áõ∏ÂØπ‰∫é src/ ÁõÆÂΩïÔºåÂøÖÈ°ª‰ª• .md ÁªìÂ∞æ</small>
                </div>
            </div>
            <div class="modal-footer">
                <button class="btn btn-secondary" onclick="hideNewFileModal()">ÂèñÊ∂à</button>
                <button class="btn btn-primary" onclick="createNewFile()">ÂàõÂª∫</button>
            </div>
        </div>
    </div>

    <!-- Ê®°ÊÄÅÊ°ÜÔºöÈáçÂëΩÂêç -->
    <div id="renameModal" class="modal" role="dialog" aria-modal="true" aria-labelledby="renameModalTitle">
        <div class="modal-content modal-sm">
            <div class="modal-header">
                <h3 id="renameModalTitle">ÈáçÂëΩÂêç</h3>
                <button class="modal-close" onclick="hideRenameModal()" aria-label="ÂÖ≥Èó≠ÂØπËØùÊ°Ü">&times;</button>
            </div>
            <div class="modal-body">
                <div class="form-group">
                    <label for="newFileName">Êñ∞Êñá‰ª∂Âêç</label>
                    <input type="text" id="newFileName" placeholder="Êñ∞Êñá‰ª∂Âêç.md">
                </div>
            </div>
            <div class="modal-footer">
                <button class="btn btn-secondary" onclick="hideRenameModal()">ÂèñÊ∂à</button>
                <button class="btn btn-primary" onclick="confirmRename()">Á°ÆËÆ§</button>
            </div>
        </div>
    </div>

    <!-- Ê®°ÊÄÅÊ°ÜÔºöÁ°ÆËÆ§Âà†Èô§ -->
    <div id="deleteModal" class="modal" role="dialog" aria-modal="true" aria-labelledby="deleteModalTitle">
        <div class="modal-content modal-sm">
            <div class="modal-header">
                <h3 id="deleteModalTitle">Á°ÆËÆ§Âà†Èô§</h3>
                <button class="modal-close" onclick="hideDeleteModal()" aria-label="ÂÖ≥Èó≠ÂØπËØùÊ°Ü">&times;</button>
            </div>
            <div class="modal-body">
                <p id="deleteMessage">Á°ÆÂÆöË¶ÅÂà†Èô§Ê≠§Êñá‰ª∂ÂêóÔºüÊ≠§Êìç‰Ωú‰∏çÂèØÊí§ÈîÄ„ÄÇ</p>
            </div>
            <div class="modal-footer">
                <button class="btn btn-secondary" onclick="hideDeleteModal()">ÂèñÊ∂à</button>
                <button class="btn btn-danger" onclick="confirmDelete()">Âà†Èô§</button>
            </div>
        </div>
    </div>

    <!-- Ê®°ÊÄÅÊ°ÜÔºöÊú™‰øùÂ≠òÊèêÁ§∫ -->
    <div id="unsavedModal" class="modal" role="dialog" aria-modal="true" aria-labelledby="unsavedModalTitle">
        <div class="modal-content modal-sm">
            <div class="modal-header">
                <h3 id="unsavedModalTitle">Êú™‰øùÂ≠òÁöÑÊõ¥Êîπ</h3>
                <button class="modal-close" onclick="hideUnsavedModal()" aria-label="ÂÖ≥Èó≠ÂØπËØùÊ°Ü">&times;</button>
            </div>
            <div class="modal-body">
                <p>ÂΩìÂâçÊñá‰ª∂ÊúâÊú™‰øùÂ≠òÁöÑÊõ¥ÊîπÔºåÊòØÂê¶‰øùÂ≠òÔºü</p>
            </div>
            <div class="modal-footer">
                <button class="btn btn-secondary" onclick="discardChanges()">‰∏ç‰øùÂ≠ò</button>
                <button class="btn btn-primary" onclick="saveAndClose()">‰øùÂ≠ò</button>
                <button class="btn btn-outline" onclick="hideUnsavedModal()">ÂèñÊ∂à</button>
            </div>
        </div>
    </div>

    <!-- Toast ÂÆπÂô® -->
    <div id="toastContainer" class="toast-container"></div>

    <!-- JavaScript Ê®°ÂùóÔºàÂêàÂπ∂‰∏∫Âçï‰∏™Êñá‰ª∂‰ª•ÂáèÂ∞ë HTTP ËØ∑Ê±ÇÔºâ -->
    <script src="/static/editor/bundle.js?v=1" defer></script>
    <!-- AI ËÅäÂ§©Ê®°Âùó -->
    <script src="/static/editor/chat-context.js?v=5" defer></script>
    <script src="/static/editor/chat-config.js" defer></script>
    <script src="/static/editor/chat.js?v=3" defer></script>
</body>

</html>
